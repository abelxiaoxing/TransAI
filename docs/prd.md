# TransAI UI/UX 改进产品需求文档 (PRD)

## 📋 变更记录

| 日期 | 版本 | 描述 | 作者 |
|------|------|------|------|
| 2025-09-26 | v1.0 | 初始 PRD 创建 - UI/UX 改进需求 | John |

---

## 🎯 目标

基于头脑风暴会议的分析，本 PRD 旨在实现以下核心目标：

- **提升用户体验**：解决输入框交互问题，实现任意位置点击即可输入
- **现代化界面**：实现专业的深色主题，提升整体视觉精美度
- **优化交互流程**：实现划词翻译功能，减少用户操作步骤
- **增强产品竞争力**：通过界面和交互改进，提升产品市场竞争力

---

## 📖 背景上下文

TransAI 是一个基于 Qt/C++ 的跨平台 GPT 翻译应用程序，目前为个人用户提供快捷的文本翻译服务。通过用户反馈和深入分析，发现当前产品在 UI/UX 方面存在以下关键问题：

1. **交互不便**：输入框需要点击特定位置才能获得焦点，影响用户输入体验
2. **视觉老旧**：当前界面设计较为简单，缺乏现代化的深色主题支持
3. **操作繁琐**：现有的剪贴板翻译需要用户额外复制步骤，不够高效
4. **体验不连贯**：翻译窗口需要手动关闭，中断了用户的阅读流程

本 PRD 旨在通过系统性的 UI/UX 改进，解决这些问题，为用户提供更现代、更高效、更流畅的翻译体验。

---

## 📋 需求

### 功能需求

**FR1: 输入框交互优化**
- 用户点击输入框内任意位置都能获得焦点并开始输入
- 保持现有文本选择、复制、粘贴功能不变
- 确保滚动功能不受影响

**FR2: 深色主题实现**
- 实现专业的深色主题配色方案
- 提供统一的视觉风格和色彩系统
- 支持主题切换（可选）

**FR3: 界面精美化**
- 实现圆角、阴影等现代化视觉效果
- 添加平滑的动画和过渡效果
- 优化组件间距和布局层次

**FR4: 划词翻译功能**
- 支持用户选中文本后通过快捷键触发翻译
- 在选中文本附近显示翻译结果窗口
- 实现点击外部区域自动关闭翻译窗口

**FR5: 自动关闭功能**
- 翻译窗口支持点击外部区域自动关闭
- 保持窗口置顶功能（如需要）
- 不影响现有快捷键和系统托盘功能

### 非功能需求

**NFR1: 性能要求**
- 所有 UI 改进不得影响应用性能
- 动画效果必须轻量级，确保流畅运行
- 内存使用控制在合理范围内

**NFR2: 技术兼容性**
---

## 🎨 用户界面设计目标

### 整体 UX 愿景

创建一个现代化、专业的翻译应用界面，通过深色主题和精致的视觉设计，为用户提供沉浸式的翻译体验。界面应该简洁直观，减少用户的认知负担，让用户专注于翻译内容本身。

### 关键交互范式

1. **直观操作**：所有交互都应该是直观和可预测的，符合用户的使用习惯
2. **即时反馈**：用户的每个操作都应该得到即时的视觉反馈
3. **流畅体验**：动画和过渡应该自然流畅，不中断用户的操作流程
4. **一致性**：整个应用的交互模式应该保持一致性

### 核心界面和视图

1. **主翻译界面**：包含输入框、输出区域、语言选择器、翻译控制按钮
2. **设置界面**：API 配置、快捷键设置、主题设置
3. **划词翻译弹窗**：显示选中文本的翻译结果
4. **系统托盘菜单**：快速访问常用功能

### 无障碍性：WCAG AA

确保界面符合 WCAG AA 标准：
- 文本与背景的对比度至少为 4.5:1
- 所有交互元素都可以通过键盘访问
- 为图标和按钮提供清晰的标签

### 品牌形象

采用现代化的设计语言：
- **主色调**：深绿色 (#4EC9B0) 作为强调色
- **背景色**：深灰色 (#1E1E1E) 提供良好的对比度
- **文本色**：浅灰色 (#D4D4D4) 确保可读性
- **圆角设计**：统一的 8px 圆角，营造现代感

### 目标设备和平台：跨平台桌面应用

- **Windows**：原生 Win32 支持
- **macOS**：Cocoa 框架集成
- **Linux**：X11 库支持

---

## 🔧 技术假设

### 仓库结构：单仓库 (Monorepo)

保持现有的单仓库结构，所有代码在一个仓库中管理，便于统一开发和部署。

### 服务架构

**架构决策**：单机桌面应用 + 远程 API 调用

- **前端**：Qt/QML 用户界面
- **后端**：C++ 业务逻辑和 API 调用
- **远程服务**：OpenAI API 翻译服务
- **本地存储**：JSON 配置文件

### 测试要求

**测试策略**：单元测试 + 手动测试

- **单元测试**：核心业务逻辑和工具函数
- **手动测试**：UI 交互和跨平台兼容性
- **集成测试**：API 调用和数据流验证

### 其他技术假设和请求

- **技术栈**：必须保持 Qt 6 + QML + C++17
- **性能要求**：所有 UI 改进不得影响应用性能
- **兼容性**：与现有代码架构无缝集成
- **开发工具**：继续使用 CMake 构建系统
- **第三方库**：继续使用 QHotkey 库，避免引入新的依赖

**NFR3: 用户体验**
- 保持现有用户习惯和学习成本最小化
- 新功能要有直观的交互反馈
- 整体体验要保持一致性和连贯性

**NFR4: 可维护性**
- 代码结构清晰，易于后续维护
- 遵循 Qt 官方开发规范
- 提供必要的代码注释和文档

---

## 📋 Epic 列表

基于功能依赖关系和交付价值，我建议按以下顺序实施这些 Epic：

### **Epic 1: 基础主题和交互改进**
**目标**：建立现代化的深色主题系统，解决输入框交互问题，为后续功能奠定视觉和交互基础。

### **Epic 2: 划词翻译功能**
**目标**：实现划词翻译的核心功能，包括文本选择检测、快捷键触发和翻译结果显示。

### **Epic 3: 界面精美化和完善**
**目标**：添加圆角、阴影、动画等视觉效果，完善整体用户体验。

---

## 📖 Epic 1: 基础主题和交互改进

### **Epic 目标**
建立统一的深色主题系统，解决输入框焦点问题，为用户提供现代化的界面体验。这个 Epic 将为后续所有功能奠定视觉和交互基础，确保整个应用的一致性和专业性。

### **用户故事**

#### **故事 1.1: 深色主题系统实现**
**作为** 个人用户，
**我希望** 应用拥有专业的深色主题，
**所以** 我在长时间使用时眼睛更舒适，界面看起来更现代化。

**验收标准：**
1. 实现统一的深色配色方案（背景 #1E1E1E，前景 #D4D4D4，强调色 #4EC9B0）
2. 所有 UI 组件应用深色主题样式
3. 文本与背景对比度符合 WCAG AA 标准
4. 主题切换在应用重启后保持设置

#### **故事 1.2: 输入框交互优化**
**作为** 翻译应用用户，
**我希望** 点击输入框内任意位置都能开始输入，
**所以** 我不必精确点击特定位置，使用更加便捷。

**验收标准：**
1. 修改 GTextEdit 组件，支持任意位置点击获取焦点
2. 点击后光标正确定位到点击位置
3. 保持现有文本选择、复制、粘贴功能不变
4. 滚动功能不受影响

#### **故事 1.3: 自动关闭翻译窗口**
**作为** 阅读翻译结果的用户，
**我希望** 点击翻译窗口外部区域时窗口自动关闭，
**所以** 我的阅读流程不被中断，体验更加连贯。

**验收标准：**
1. 翻译窗口支持点击外部区域自动关闭
2. 关闭动画流畅自然
3. 窗口位置计算避免遮挡重要内容
4. 不影响现有快捷键和系统托盘功能

---

## 📖 Epic 2: 划词翻译功能

### **Epic 目标**
实现划词翻译的核心功能，让用户能够通过选中文本 + 快捷键的方式快速获取翻译结果，显著提升翻译效率。

### **用户故事**

#### **故事 2.1: 文本选择检测**
**作为** 需要翻译的用户，
**我希望** 系统能够检测我选中的文本，
**所以** 我可以快速翻译而不需要先复制内容。

**验收标准：**
1. 实现跨平台文本选择检测功能
2. 支持在任意应用程序中选中文本
3. 选择检测不干扰用户的正常操作
4. 提供视觉反馈表明已检测到文本选择

#### **故事 2.2: 划词翻译快捷键**
**作为** 效率导向的用户，
**我希望** 选中文本后按下快捷键就能触发翻译，
**所以** 我可以用最少的步骤完成翻译操作。

**验收标准：**
1. 实现划词翻译专用快捷键（默认：Ctrl+Shift+T）
2. 支持在设置中自定义快捷键
3. 快捷键与现有功能不冲突
4. 快捷键响应时间 < 100ms

#### **故事 2.3: 翻译结果弹窗**
**作为** 查看翻译结果的用户，
**我希望** 翻译结果在选中文本附近弹出，
**所以** 我可以对照原文和译文，阅读体验更佳。

**验收标准：**
1. 翻译窗口智能定位，避免遮挡选中文本
2. 窗口大小自适应翻译内容长度
3. 支持拖拽移动窗口位置
4. 窗口样式与主应用保持一致

---

## 📖 Epic 3: 界面精美化和完善

### **Epic 目标**
通过圆角、阴影、动画等现代化视觉效果，提升整体界面精美度，为用户提供更加愉悦的使用体验。

### **用户故事**

#### **故事 3.1: 圆角和阴影效果**
**作为** 追求现代感的用户，
**我希望** 界面元素有圆角和阴影效果，
**所以** 应用看起来更加精美和专业。

**验收标准：**
1. 所有主要组件应用统一的 8px 圆角
2. 添加适当的阴影效果增强层次感
3. 阴影效果在深色背景下表现良好
4. 性能不受影响，动画流畅

#### **故事 3.2: 平滑动画效果**
**作为** 注重细节的用户，
**我希望** 界面有平滑的动画过渡，
**所以** 交互感觉更加自然和响应迅速。

**验收标准：**
1. 按钮悬停状态有平滑的颜色变化
2. 窗口显示/隐藏有淡入淡出效果
3. 所有动画时长在 200-300ms 之间
4. 动画不影响应用性能

#### **故事 3.3: 布局和间距优化**
**作为** 追求整洁界面的用户，
**我希望** 界面元素有合理的间距和对齐，
**所以** 整体看起来更加整洁和专业。

**验收标准：**
1. 统一的间距系统（8px 基础单位）
2. 元素对齐符合设计规范
3. 在不同屏幕尺寸下表现良好
4. 保持现有功能的可访问性

---

## 📋 检查清单结果报告

### **PM 检查清单执行结果**

**✅ 完整性检查**
- [x] 所有 4 个核心 UI/UX 需求都已转化为具体功能需求
- [x] 每个功能都有明确的验收标准
- [x] 技术约束和兼容性要求已明确
- [x] 用户体验目标已量化

**✅ 可行性检查**
- [x] 所有技术方案都基于现有 Qt/QML 技术栈
- [x] 功能依赖关系清晰，无循环依赖
- [x] 每个故事都有明确的价值交付
- [x] 性能要求已纳入非功能性需求

**✅ 用户价值检查**
- [x] 每个故事都以用户视角编写
- [x] 验收标准关注用户获得的价值
- [x] 交互改进针对真实使用痛点
- [x] 保持现有用户习惯，学习成本低

**✅ 技术可行性检查**
- [x] 所有改进都可基于现有架构实现
- [x] 避免引入新的第三方依赖
- [x] 保持跨平台兼容性
- [x] 代码维护性要求已明确

### **风险评估**

**🟡 中等风险项目**
1. **跨平台文本选择检测** - 不同操作系统实现方式差异较大
2. **性能平衡** - 视觉效果与性能的平衡需要仔细调优

**🟢 低风险项目**
1. **深色主题实现** - Qt 提供了完善的主题支持
2. **输入框交互优化** - 基于 QML 的事件处理相对简单
3. **动画效果** - Qt 动画系统成熟稳定

### **建议**
- 建议优先实施 Epic 1，为后续功能奠定基础
- 划词翻译功能需要进行充分的跨平台测试
- 建议在每个 Epic 完成后进行用户测试验证

---

## 🚀 下一步

### **UX 专家提示**

为 UX 专家提供的指导：
- 基于本 PRD 中的用户界面设计目标，创建详细的 UI 规范
- 重点解决输入框交互优化和划词翻译的用户体验
- 确保深色主题符合无障碍性标准
- 设计动画效果时注重性能优化

### **架构师提示**

为架构师提供的指导：
- 基于本 PRD 中的技术假设，设计详细的技术架构
- 重点考虑跨平台文本选择检测的技术实现
- 设计深色主题的系统架构，支持动态切换
- 确保所有 UI 改进不影响应用性能
- 保持现有代码架构的可维护性和扩展性